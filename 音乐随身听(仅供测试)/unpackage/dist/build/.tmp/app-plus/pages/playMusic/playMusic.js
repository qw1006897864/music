(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/playMusic/playMusic"],{"1b8e":function(t,i,e){"use strict";e.r(i);var o=e("611a"),s=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);i["default"]=s.a},"3b7f":function(t,i,e){"use strict";(function(t){e("c7ea"),e("921b");o(e("66fd"));var i=o(e("f9c8"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},"4c62":function(t,i,e){},5776:function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement;t._self._c},s=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return s})},"611a":function(t,i,e){"use strict";(function(t,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n(e("5999"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){return e.e("components/uni-swipe-action/uni-swipe-action").then(e.bind(null,"62ec"))},u={components:{uniSwipeAction:a},data:function(){return{songData:[],startTime:"00:00",endTime:"00:00",percent:0,isTouched:!1,playingLyric:"",lyric:null}},computed:{playState:function(){return this.$store.getters.playState}},onLoad:function(t){var i=JSON.parse(decodeURIComponent(t.songData));this.songData=i,this.setBackgroundAudio()},methods:{getLyric:function(){var t=this;this.playingLyric="",this.$http.getLyric(this.songData.songmid).then(function(i){t.lyric&&(t.lyric.stop(),t.lyric=null),t.lyric=new s.default(i,t.handleLyric),t.lyric.lines.length?t.lyric.play():t.playingLyric="当前歌曲暂无歌词 (T＿T)"})},setLyric:function(){if(this.lyric){var t=this.audioCtx.currentTime?this.audioCtx.currentTime:0;this.lyric.seek(1e3*t)}},handleLyric:function(t){t.lineNum;var i=t.txt;this.playingLyric=i},stopLyric:function(){this.lyric&&this.lyric.stop()},setTime:function(t){t=parseInt(t);var i=parseInt(t/60);i=i<10?"0"+i:i;var e=t%60;return e=e<10?"0"+e:e,i+":"+e},change:function(i){this.percent=i.detail.value,this.audioCtx.seek(i.detail.value),this.startTime=this.setTime(i.detail.value),this.lyric.seek(1e3*i.detail.value),this.isTouched=!1,console.log(t(i," at pages/playMusic/playMusic.vue:193"))},changing:function(t){this.lyric.seek(1e3*t.detail.value),this.startTime=this.setTime(t.detail.value),this.isTouched=!0},back:function(){this.stopLyric(),o.navigateBack()},prevAudio:function(){this.$store.getters.currentAudioIndex>0?this.$store.commit("SET_CURRENTAUDIOINDEX",this.$store.getters.currentAudioIndex-1):this.$store.commit("SET_CURRENTAUDIOINDEX",this.$store.getters.audioSrc.length-1),this.songData=this.$store.getters.audioItem,this.setBackgroundAudio()},nextAudio:function(){this.$store.getters.currentAudioIndex<this.$store.getters.audioSrc.length-1?this.$store.commit("SET_CURRENTAUDIOINDEX",this.$store.getters.currentAudioIndex+1):this.$store.commit("SET_CURRENTAUDIOINDEX",0),this.songData=this.$store.getters.audioItem,this.setBackgroundAudio()},playAudio:function(){this.audioCtx.play()},pauseAudio:function(){this.audioCtx.pause()},setBackgroundAudio:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.audioCtx.src=this.$store.getters.currentAudioSrc,this.audioCtx.title=this.songData.songname,this.audioCtx.singer=this.songData.singer,this.audioCtx.coverImgUrl=this.songData.imgurl,this.audioCtx.seek(0),this.startTime=this.setTime(0),this.endTime=this.setTime(this.songData.interval),this.getLyric()},initAudio:function(){var i=this;this.audioCtx.onPlay(function(){console.log(t("当前歌曲开始播放"," at pages/playMusic/playMusic.vue:293")),i.$store.commit("SET_PLAYSTATE",!0),i.setLyric()}),this.audioCtx.onTimeUpdate(function(){i.isTouched||(i.percent=Math.floor(i.audioCtx.currentTime),i.startTime=i.setTime(i.audioCtx.currentTime))}),this.audioCtx.onWaiting(function(){console.log(t("当前歌曲正在加载"," at pages/playMusic/playMusic.vue:314"))}),this.audioCtx.onPause(function(){console.log(t("当前歌曲已暂停"," at pages/playMusic/playMusic.vue:321")),i.$store.commit("SET_PLAYSTATE",!1),i.stopLyric()}),this.audioCtx.onEnded(function(){console.log(t("当前歌曲播放完毕"," at pages/playMusic/playMusic.vue:330")),i.$store.commit("SET_PLAYSTATE",!1),i.nextAudio(),i.stopLyric()}),this.audioCtx.onStop(function(){console.log(t("当前歌曲播放停止"," at pages/playMusic/playMusic.vue:341")),i.$store.commit("SET_PLAYSTATE",!1),i.stopLyric()}),this.audioCtx.onError(function(){console.log(t("当前歌曲播放错误"," at pages/playMusic/playMusic.vue:350")),i.$store.commit("SET_PLAYSTATE",!1),i.stopLyric()}),this.audioCtx.onPrev(function(){console.log(t("用户在系统音乐播放面板点击上一曲事件"," at pages/playMusic/playMusic.vue:359")),i.prevAudio()}),this.audioCtx.onNext(function(){console.log(t("用户在系统音乐播放面板点击下一曲事件"," at pages/playMusic/playMusic.vue:367")),i.nextAudio()})},createBackgroundAudio:function(){this.audioCtx.autoplay=!1,this.audioCtx.src=this.$store.getters.currentAudioSrc,this.audioCtx.onPlay(function(){console.log(t("开始播放"," at pages/playMusic/playMusic.vue:381"))}),this.audioCtx.onError(function(i){console.log(t(i.errMsg," at pages/playMusic/playMusic.vue:384")),console.log(t(i.errCode," at pages/playMusic/playMusic.vue:385"))})}},onReady:function(){}};i.default=u}).call(this,e("0de9")["default"],e("6e42")["default"])},c4bc:function(t,i,e){"use strict";var o=e("4c62"),s=e.n(o);s.a},f9c8:function(t,i,e){"use strict";e.r(i);var o=e("5776"),s=e("1b8e");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);e("c4bc");var a=e("2877"),u=Object(a["a"])(s["default"],o["a"],o["b"],!1,null,"05538b23",null);i["default"]=u.exports}},[["3b7f","common/runtime","common/vendor"]]]);